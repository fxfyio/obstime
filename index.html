<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS 时间配置器</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;500&family=JetBrains+Mono:wght@400;500&family=Fira+Code:wght@400;500&family=Bebas+Neue&family=Righteous&family=Audiowide&family=Comfortaa:wght@400;500&family=Quicksand:wght@400;500&family=Rajdhani:wght@400;500;600&family=Noto+Sans+SC:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            font-family: 'Noto Sans SC', sans-serif;
            color: #ffffff;
            padding: 40px 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #a0a0a0;
            margin-bottom: 40px;
        }

        .config-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #667eea;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #b0b0b0;
            font-size: 14px;
        }

        input,
        select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        select option {
            background: #1a1a2e;
            color: #ffffff;
        }

        .style-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }

        .style-option {
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .style-option:hover {
            transform: translateY(-2px);
        }

        .style-option.selected {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .style-option .preview-time {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .style-option .style-name {
            font-size: 12px;
            opacity: 0.8;
        }

        /* 透明叠加 */
        .style-light { background: rgba(60,60,60,0.5); }
        .style-light .preview-time { color: #fff; text-shadow: 0 1px 5px rgba(0,0,0,0.5); }

        .style-dark { background: rgba(200,200,200,0.6); }
        .style-dark .preview-time { color: #1a1a1a; }
        .style-dark .style-name { color: #333; }

        .style-stroke-light { background: rgba(60,60,60,0.5); }
        .style-stroke-light .preview-time { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.3); }

        .style-stroke-dark { background: rgba(200,200,200,0.6); }
        .style-stroke-dark .preview-time { color: #1a1a1a; }
        .style-stroke-dark .style-name { color: #333; }

        /* 半透明卡片 */
        .style-glass-dark { background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); }
        .style-glass-dark .preview-time { color: #fff; }

        .style-glass-light { background: rgba(255,255,255,0.15); backdrop-filter: blur(5px); }
        .style-glass-light .preview-time { color: #fff; }

        .style-outline { background: transparent; border: 2px solid rgba(255,255,255,0.8) !important; }
        .style-outline .preview-time { color: #fff; }

        .style-pill-dark { background: rgba(0,0,0,0.7); border-radius: 20px; }
        .style-pill-dark .preview-time { color: #fff; }

        /* 霓虹/电竞 */
        .style-neon-cyan { background: rgba(0,0,0,0.8); border: 1px solid #00f0ff !important; }
        .style-neon-cyan .preview-time { color: #00f0ff; text-shadow: 0 0 8px rgba(0,240,255,0.6); }

        .style-neon-purple { background: rgba(0,0,0,0.8); border: 1px solid #bf00ff !important; }
        .style-neon-purple .preview-time { color: #d946ef; text-shadow: 0 0 8px rgba(217,70,239,0.6); }

        .style-neon-pink { background: rgba(0,0,0,0.8); border: 1px solid #ff0080 !important; }
        .style-neon-pink .preview-time { color: #ff0080; text-shadow: 0 0 8px rgba(255,0,128,0.6); }

        .style-neon-green { background: rgba(0,0,0,0.85); border: 1px solid #00ff00 !important; }
        .style-neon-green .preview-time { color: #00ff00; text-shadow: 0 0 8px rgba(0,255,0,0.5); }

        .style-esports-red { background: linear-gradient(135deg, rgba(20,0,0,0.9), rgba(40,0,0,0.9)); border-left: 3px solid #ff0000 !important; }
        .style-esports-red .preview-time { color: #ff4444; }

        .style-esports-blue { background: linear-gradient(135deg, rgba(0,0,20,0.9), rgba(0,0,40,0.9)); border-left: 3px solid #0080ff !important; }
        .style-esports-blue .preview-time { color: #4da6ff; }

        .style-rgb { background: rgba(0,0,0,0.85); border: 2px solid #ff00ff !important; }
        .style-rgb .preview-time { color: #fff; }

        /* LED */
        .style-led-red { background: #0a0a0a; }
        .style-led-red .preview-time { color: #ff3333; text-shadow: 0 0 8px rgba(255,51,51,0.5); }

        .style-led-green { background: #0a0a0a; }
        .style-led-green .preview-time { color: #33ff33; text-shadow: 0 0 8px rgba(51,255,51,0.5); }

        .style-led-blue { background: #0a0a0a; }
        .style-led-blue .preview-time { color: #3399ff; text-shadow: 0 0 8px rgba(51,153,255,0.5); }

        .style-terminal { background: #0d1117; border: 1px solid #30363d !important; }
        .style-terminal .preview-time { color: #58a6ff; }

        /* 专业/商务 */
        .style-minimal-light { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .style-minimal-light .preview-time { color: #1a1a1a; }
        .style-minimal-light .style-name { color: #666; }

        .style-minimal-dark { background: #1a1a1a; }
        .style-minimal-dark .preview-time { color: #f5f5f5; }

        .style-business { background: linear-gradient(135deg, #1e3a5f, #2d4a6f); }
        .style-business .preview-time { color: #fff; }

        .style-news { background: linear-gradient(135deg, #c41e3a, #dc143c); }
        .style-news .preview-time { color: #fff; }

        .style-tech { background: linear-gradient(135deg, #0f172a, #1e293b); border: 1px solid #334155 !important; }
        .style-tech .preview-time { color: #38bdf8; }

        .style-streaming { background: linear-gradient(135deg, #667eea, #764ba2); }
        .style-streaming .preview-time { color: #fff; }

        /* 动态渐变边框 - 使用旋转动画 */
        .style-rainbow { 
          background: #0a0a0a;
          border: 3px solid transparent;
          background-image: linear-gradient(#0a0a0a, #0a0a0a), 
                            conic-gradient(from var(--angle, 0deg), #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0080ff, #8000ff, #ff0080, #ff0000);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          animation: rotate-border 2s linear infinite;
        }
        .style-rainbow .preview-time { color: #fff; }

        .style-aurora { 
          background: #0a0a0a;
          border: 3px solid transparent;
          background-image: linear-gradient(#0a0a0a, #0a0a0a), 
                            conic-gradient(from var(--angle, 0deg), #00c6ff, #0072ff, #7209b7, #a855f7, #00c6ff);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          animation: rotate-border 3s linear infinite;
        }
        .style-aurora .preview-time { color: #a5b4fc; }

        .style-sunset { 
          background: #0a0a0a;
          border: 3px solid transparent;
          background-image: linear-gradient(#0a0a0a, #0a0a0a), 
                            conic-gradient(from var(--angle, 0deg), #f12711, #f5af19, #ff6b35, #ef4444, #f12711);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          animation: rotate-border 2.5s linear infinite;
        }
        .style-sunset .preview-time { color: #fbbf24; }

        .style-ocean { 
          background: #0a0a0a;
          border: 3px solid transparent;
          background-image: linear-gradient(#0a0a0a, #0a0a0a), 
                            conic-gradient(from var(--angle, 0deg), #0077b6, #00b4d8, #90e0ef, #06b6d4, #0077b6);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          animation: rotate-border 3s linear infinite;
        }
        .style-ocean .preview-time { color: #22d3ee; }

        .style-neon-flow { 
          background: #0a0a0a;
          border: 3px solid transparent;
          background-image: linear-gradient(#0a0a0a, #0a0a0a), 
                            conic-gradient(from var(--angle, 0deg), #ff0080, #00ffff, #ff00ff, #00ff88, #ff0080);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          animation: rotate-border 1.5s linear infinite;
        }
        .style-neon-flow .preview-time { color: #fff; }

        @property --angle {
          syntax: '<angle>';
          initial-value: 0deg;
          inherits: false;
        }

        @keyframes rotate-border {
          to { --angle: 360deg; }
        }

        .preview-container {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><rect width="10" height="10" fill="%23333"/><rect x="10" y="10" width="10" height="10" fill="%23333"/></svg>');
            background-size: 20px 20px;
            border-radius: 12px;
            padding: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .url-output {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .url-output input {
            background: rgba(0, 0, 0, 0.5);
            font-family: monospace;
            font-size: 14px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #ffffff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .tip {
            font-size: 12px;
            color: #808080;
            margin-top: 5px;
        }

        .format-examples {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .format-tag {
            padding: 4px 10px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .format-tag:hover {
            background: rgba(102, 126, 234, 0.4);
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .row {
                grid-template-columns: 1fr;
            }
        }

        .copied {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            animation: fadeInOut 2s ease;
            z-index: 1000;
        }

        @keyframes fadeInOut {

            0%,
            100% {
                opacity: 0;
                transform: translateY(-10px);
            }

            20%,
            80% {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>OBS 时间显示器</h1>
        <p class="subtitle">生成自定义时间链接，用于OBS浏览器源</p>

        <!-- 样式选择 -->
        <div class="config-section">
            <h2 class="section-title">选择样式</h2>
            <div class="style-grid">
                <div class="style-option style-light selected" data-style="light"><div class="preview-time">12:00</div><div class="style-name">透明白</div></div>
                <div class="style-option style-dark" data-style="dark"><div class="preview-time">12:00</div><div class="style-name">透明黑</div></div>
                <div class="style-option style-stroke-light" data-style="stroke-light"><div class="preview-time">12:00</div><div class="style-name">描边白</div></div>
                <div class="style-option style-stroke-dark" data-style="stroke-dark"><div class="preview-time">12:00</div><div class="style-name">描边黑</div></div>
                <div class="style-option style-glass-dark" data-style="glass-dark"><div class="preview-time">12:00</div><div class="style-name">暗底</div></div>
                <div class="style-option style-glass-light" data-style="glass-light"><div class="preview-time">12:00</div><div class="style-name">亮底</div></div>
                <div class="style-option style-outline" data-style="outline"><div class="preview-time">12:00</div><div class="style-name">线框</div></div>
                <div class="style-option style-pill-dark" data-style="pill-dark"><div class="preview-time">12:00</div><div class="style-name">圆角暗</div></div>
                <div class="style-option style-neon-cyan" data-style="neon-cyan"><div class="preview-time">12:00</div><div class="style-name">霓虹青</div></div>
                <div class="style-option style-neon-purple" data-style="neon-purple"><div class="preview-time">12:00</div><div class="style-name">霓虹紫</div></div>
                <div class="style-option style-neon-pink" data-style="neon-pink"><div class="preview-time">12:00</div><div class="style-name">霓虹粉</div></div>
                <div class="style-option style-neon-green" data-style="neon-green"><div class="preview-time">12:00</div><div class="style-name">霓虹绿</div></div>
                <div class="style-option style-esports-red" data-style="esports-red"><div class="preview-time">12:00</div><div class="style-name">电竞红</div></div>
                <div class="style-option style-esports-blue" data-style="esports-blue"><div class="preview-time">12:00</div><div class="style-name">电竞蓝</div></div>
                <div class="style-option style-rgb" data-style="rgb"><div class="preview-time">12:00</div><div class="style-name">RGB</div></div>
                <div class="style-option style-led-red" data-style="led-red"><div class="preview-time">12:00</div><div class="style-name">LED红</div></div>
                <div class="style-option style-led-green" data-style="led-green"><div class="preview-time">12:00</div><div class="style-name">LED绿</div></div>
                <div class="style-option style-led-blue" data-style="led-blue"><div class="preview-time">12:00</div><div class="style-name">LED蓝</div></div>
                <div class="style-option style-terminal" data-style="terminal"><div class="preview-time">12:00</div><div class="style-name">终端</div></div>
                <div class="style-option style-minimal-light" data-style="minimal-light"><div class="preview-time">12:00</div><div class="style-name">简约白</div></div>
                <div class="style-option style-minimal-dark" data-style="minimal-dark"><div class="preview-time">12:00</div><div class="style-name">简约黑</div></div>
                <div class="style-option style-business" data-style="business"><div class="preview-time">12:00</div><div class="style-name">商务蓝</div></div>
                <div class="style-option style-news" data-style="news"><div class="preview-time">12:00</div><div class="style-name">新闻红</div></div>
                <div class="style-option style-tech" data-style="tech"><div class="preview-time">12:00</div><div class="style-name">科技感</div></div>
                <div class="style-option style-streaming" data-style="streaming"><div class="preview-time">12:00</div><div class="style-name">直播紫</div></div>
                <div class="style-option style-rainbow" data-style="rainbow"><div class="preview-time">12:00</div><div class="style-name">彩虹</div></div>
                <div class="style-option style-aurora" data-style="aurora"><div class="preview-time">12:00</div><div class="style-name">极光</div></div>
                <div class="style-option style-sunset" data-style="sunset"><div class="preview-time">12:00</div><div class="style-name">日落</div></div>
                <div class="style-option style-ocean" data-style="ocean"><div class="preview-time">12:00</div><div class="style-name">海洋</div></div>
                <div class="style-option style-neon-flow" data-style="neon-flow"><div class="preview-time">12:00</div><div class="style-name">流光</div></div>
            </div>
        </div>

        <!-- 配置选项 -->
        <div class="config-section">
            <h2 class="section-title">配置选项</h2>

            <div class="row">
                <div class="form-group">
                    <label>时区</label>
                    <select id="timezone">
                        <option value="Asia/Shanghai">北京时间 (UTC+8)</option>
                        <option value="Asia/Tokyo">东京时间 (UTC+9)</option>
                        <option value="Asia/Seoul">首尔时间 (UTC+9)</option>
                        <option value="Asia/Hong_Kong">香港时间 (UTC+8)</option>
                        <option value="Asia/Singapore">新加坡时间 (UTC+8)</option>
                        <option value="America/New_York">纽约时间 (UTC-5/-4)</option>
                        <option value="America/Los_Angeles">洛杉矶时间 (UTC-8/-7)</option>
                        <option value="Europe/London">伦敦时间 (UTC+0/+1)</option>
                        <option value="Europe/Paris">巴黎时间 (UTC+1/+2)</option>
                        <option value="Australia/Sydney">悉尼时间 (UTC+10/+11)</option>
                        <option value="UTC">UTC</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>字体大小 (px)</label>
                    <input type="number" id="fontSize" value="48" min="12" max="200">
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label>字体选择</label>
                    <select id="fontFamily">
                        <option value="">默认（跟随样式）</option>
                        <option value="bebas">Bebas Neue（海报艺术）</option>
                        <option value="righteous">Righteous（复古艺术）</option>
                        <option value="audiowide">Audiowide（科技艺术）</option>
                        <option value="comfortaa">Comfortaa（圆润现代）</option>
                        <option value="quicksand">Quicksand（轻盈优雅）</option>
                        <option value="rajdhani">Rajdhani（几何科技）</option>
                        <option value="orbitron">Orbitron（科幻数码）</option>
                        <option value="jetbrains">JetBrains Mono（等宽清晰）</option>
                        <option value="fira">Fira Code（等宽连字）</option>
                        <option value="roboto">Roboto Mono（等宽简洁）</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>字体预览</label>
                    <div id="fontPreview"
                        style="font-family: 'JetBrains Mono', monospace; font-size: 24px; padding: 12px 16px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                        12:34:56</div>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label>时间格式</label>
                    <input type="text" id="timeFormat" value="HH:mm:ss" placeholder="HH:mm:ss">
                    <div class="format-examples">
                        <span class="format-tag" data-format="HH:mm:ss">HH:mm:ss</span>
                        <span class="format-tag" data-format="HH:mm">HH:mm</span>
                        <span class="format-tag" data-format="hh:mm:ss A">hh:mm:ss A</span>
                        <span class="format-tag" data-format="hh:mm A">hh:mm A</span>
                    </div>
                    <p class="tip">HH=24小时, hh=12小时, mm=分钟, ss=秒, A=AM/PM</p>
                </div>

                <div class="form-group">
                    <label>日期格式 (可选)</label>
                    <input type="text" id="dateFormat" value="" placeholder="留空则不显示日期">
                    <div class="format-examples">
                        <span class="format-tag" data-format="YYYY-MM-DD">YYYY-MM-DD</span>
                        <span class="format-tag" data-format="MM/DD">MM/DD</span>
                        <span class="format-tag" data-format="YYYY年MM月DD日">YYYY年MM月DD日</span>
                        <span class="format-tag" data-format="MM月DD日 dddd">MM月DD日 dddd</span>
                    </div>
                    <p class="tip">YYYY=年, MM=月, DD=日, ddd=周X, dddd=星期X</p>
                </div>
            </div>
        </div>

        <!-- 预览 -->
        <div class="config-section">
            <h2 class="section-title">预览效果</h2>
            <div class="preview-container">
                <iframe id="preview" src="clock.html?style=neon" frameborder="0"
                    style="width: 100%; height: 150px; background: transparent;"></iframe>
            </div>

            <div class="url-output">
                <label>生成的链接 (复制到OBS浏览器源)</label>
                <input type="text" id="generatedUrl" readonly>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="copyUrl()">复制链接</button>
                    <button class="btn btn-primary" onclick="openPreview()">新窗口预览</button>
                </div>
            </div>
        </div>

        <!-- 使用说明 -->
        <div class="config-section">
            <h2 class="section-title">使用说明</h2>
            <ol style="line-height: 2; color: #b0b0b0; padding-left: 20px;">
                <li>在上方选择喜欢的样式和配置</li>
                <li>复制生成的链接</li>
                <li>在 OBS 中添加「浏览器」源</li>
                <li>将链接粘贴到 URL 栏</li>
                <li>设置合适的宽高 (建议: 宽400-600, 高100-200)</li>
                <li>勾选「关闭时刷新」选项</li>
            </ol>
        </div>
    </div>

    <script>
        const config = {
            style: 'neon',
            timezone: 'Asia/Shanghai',
            timeFormat: 'HH:mm:ss',
            dateFormat: '',
            fontSize: 48,
            font: ''
        };

        // 字体映射
        const fontFamilyMap = {
            'bebas': "'Bebas Neue', sans-serif",
            'righteous': "'Righteous', sans-serif",
            'audiowide': "'Audiowide', sans-serif",
            'comfortaa': "'Comfortaa', sans-serif",
            'quicksand': "'Quicksand', sans-serif",
            'rajdhani': "'Rajdhani', sans-serif",
            'orbitron': "'Orbitron', monospace",
            'jetbrains': "'JetBrains Mono', monospace",
            'fira': "'Fira Code', monospace",
            'roboto': "'Roboto Mono', monospace"
        };

        // 获取基础URL
        function getBaseUrl() {
            const url = new URL(window.location.href);
            const path = url.pathname.endsWith('/') ? url.pathname + 'clock.html' : url.pathname.replace(/index\.html$/, 'clock.html');
            return url.origin + path;
        }

        // 生成URL
        function generateUrl() {
            const params = new URLSearchParams();

            if (config.style !== 'neon') params.set('style', config.style);
            if (config.timezone !== 'Asia/Shanghai') params.set('tz', config.timezone);
            if (config.timeFormat !== 'HH:mm:ss') params.set('tf', config.timeFormat);
            if (config.dateFormat) params.set('df', config.dateFormat);
            if (config.fontSize !== 48) params.set('size', config.fontSize);
            if (config.font) params.set('font', config.font);

            const queryString = params.toString();
            return getBaseUrl() + (queryString ? '?' + queryString : '');
        }

        // 更新预览
        function updatePreview() {
            const url = generateUrl();
            document.getElementById('generatedUrl').value = url;
            document.getElementById('preview').src = url.replace(getBaseUrl(), 'clock.html');
        }

        // 样式选择
        document.querySelectorAll('.style-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.style-option').forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                config.style = option.dataset.style;
                updatePreview();
            });
        });

        // 时区选择
        document.getElementById('timezone').addEventListener('change', (e) => {
            config.timezone = e.target.value;
            updatePreview();
        });

        // 时间格式
        document.getElementById('timeFormat').addEventListener('input', (e) => {
            config.timeFormat = e.target.value;
            updatePreview();
        });

        // 日期格式
        document.getElementById('dateFormat').addEventListener('input', (e) => {
            config.dateFormat = e.target.value;
            updatePreview();
        });

        // 字体大小
        document.getElementById('fontSize').addEventListener('input', (e) => {
            config.fontSize = parseInt(e.target.value) || 48;
            updatePreview();
        });

        // 字体选择
        document.getElementById('fontFamily').addEventListener('change', (e) => {
            config.font = e.target.value;
            const preview = document.getElementById('fontPreview');
            if (config.font && fontFamilyMap[config.font]) {
                preview.style.fontFamily = fontFamilyMap[config.font];
            } else {
                preview.style.fontFamily = "'JetBrains Mono', monospace";
            }
            updatePreview();
        });

        // 格式标签点击
        document.querySelectorAll('.format-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                const format = tag.dataset.format;
                const input = tag.closest('.form-group').querySelector('input');
                input.value = format;
                input.dispatchEvent(new Event('input'));
            });
        });

        // 复制链接
        function copyUrl() {
            const url = document.getElementById('generatedUrl').value;
            navigator.clipboard.writeText(url).then(() => {
                showToast('链接已复制!');
            });
        }

        // 新窗口预览
        function openPreview() {
            window.open(generateUrl(), '_blank');
        }

        // 提示消息
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'copied';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }

        // 初始化
        updatePreview();
    </script>
</body>

</html>